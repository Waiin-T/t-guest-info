<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>t-guest-info demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../t-guest-info.html">
    <link rel="import" href="../t-product-summary.html">

    <style is="custom-style" include="demo-pages-shared-styles">
        body {
            background-color: white;
            font-family: 'Roboto';
            padding-left: 0px;
            padding-right: 0px;
        }
        
        t-guest-info {
            margin: 0px;
            padding: 0px;
            --toolbar-background-color: #eee;
            --color-for-subTitle: gray;
            --color-for-policies: #4CB050;
            --color-for-button-labels: #478BD7;
        }
    </style>
</head>

<body unresolved>

    <t-guest-info id="guestInfo" option='{
                  "allowTitle": true,
                  "allowTitleForLeadPax" : true,
                  "allowContactNumber" : false,
                  "allowContactNumberForLeadPax" : true,
                  "allowEmail" : false,
                  "allowEmailForLeadPax" : true,
                  "requiredField" : [
                      "firstname",
                      "lastname"
                      ],
                  "requiredFieldForLeadPax" : [
                      "contactNumber",
                      "title",
                      "email"
                      ]
                }' resources='{
	"icons": {
		"terms": "terms-ico"
	},
	"labels": {
		"adult": {
            "title": "Adult",
            "titlep": "Adults",
			"info": "(12+ years)"
		},
		"child": {
            "title": "Child",
            "titlep": "Children",
			"info": "(upto 11 years)"
		}
	},
	"fields": {
		"title": {
			"values": [{
					"key": "Mr"
				},
				{
					"key": "Ms"
				}
			],
			"selected": "Mr",
			"title": "Title",
			"errors": "Please select a title"
		},
		"firstName": {
			"value": "",
			"title": "First name",
			"errors": "Firstname is required"
		},
		"lastName": {
			"value": "",
			"title": "Last name",
			"errors": "Lastname is required"
		},
		"email": {
			"value": "",
			"info": "We will send you email confirmation on this address",
			"errors": "Please enter a valid email address"
		},
		"countryCode": {
			"values": [{
					"key": "India +91",
					"value": "+91"
				},
				{
					"key": "USA +1",
					"value": "+1"
				}
			],
			"title": "Country code",
			"errors": "Countrycode is required"
		},
		"contactNumber": {
			"value": "",
			"title": "Contact number",
			"info": "In case of any notifications our agent will reach you on this number",
            "errors": "Contact number is required",
            "invalidError": "Contact number is invalid"
		}
	},
	"loyaltyProgram": {
        "loyaltyProgram" : "Loyalty program",
		"remove": "Remove",
		"addNewGuest": "Add program for other guest",
		"guestNameError": "Please enter guest details first",
		"label": {
			"guestName": "Guest name",
			"programName": "Program name",
			"programNumber": "Program number"
		}
	},
	"newGuest": "Add New",
	"chooseGuest": "Choose guest"
}' product=' [{
        "id": "123123",
        "name": "El Cortez Hotel &; Casino",
        "type" : "hotel",
        "allowLoyalty": true,
        "title" : "Room",
        "rooms": [
            {
                "id": "ypHtxnfawEWvbhtBo2ZKOw",
                "name": "Strip View, 1 King Bed",
                "onlyLeadPaxInfo": false,
                "criteria": {
                    "checkIn": "05/22/2017",
                    "checkout": "05/28/2017",
                    "stayDuration": 2,
                    "traveler": {
                        "adult": 3,
                        "child": 1
                    }
                }
                ,
                 "policies": [
                     "FREE cancellation before 11:59PM on April 25, 2017"
                 ]
            },
                {
                "id": "ypHtxnfawEWvbhtBo2ZKOw",
                "name": "Strip View, 1 King Bed",
                "onlyLeadPaxInfo": false,
                "criteria": {
                    "checkIn": "05/22/2017",
                    "checkout": "05/28/2017",
                    "stayDuration": 2,
                    "traveler": {
                        "adult": 4,
                        "child": 2
                    }
                }
                ,
                 "policies": [
                     "FREE cancellation before 11:59PM on April 25, 2017"
                 ]
            },{
                "id": "ypHtxnfawEWvbhtBo2ZKOw",
                "name": "Strip View, 1 King Bed",
                "onlyLeadPaxInfo": false,
                "criteria": {
                    "checkIn": "05/22/2017",
                    "checkout": "05/28/2017",
                    "stayDuration": 2,
                    "traveler": {
                        "adult": 2,
                        "child": 1
                    }
                }
                ,
                 "policies": [
                     "FREE cancellation before 11:59PM on April 25, 2017"
                 ]
            }
        ]
    },{
        "id": "123123",
        "name": "El Cortez Hotel &; Casino",
        "type" : "hotel",
        "allowLoyalty": true,
        "title" : "Room",
        "rooms": [
            {
                "id": "ypHtxnfawEWvbhtBo2ZKOw",
                "name": "Strip View, 1 King Bed",
                "onlyLeadPaxInfo": false,
                "criteria": {
                    "checkIn": "05/22/2017",
                    "checkout": "05/28/2017",
                    "stayDuration": 2,
                    "traveler": {
                        "adult": 3,
                        "child": 1
                    }
                }
                ,
                 "policies": [
                     "FREE cancellation before 11:59PM on April 25, 2017"
                 ]
            },{
                "id": "wurdghwbfjkenwjkbJ",
                "name": "Strip View, 1 King Bed",
                "onlyLeadPaxInfo": false,
                "criteria": {
                    "checkIn": "05/22/2017",
                    "checkout": "05/28/2017",
                    "stayDuration": 2,
                    "traveler": {
                        "adult": 3,
                        "child": 2
                    }
                }
                ,
                 "policies": [
                     "FREE cancellation before 11:59PM on April 25, 2017"
                 ]
            }
        ]
    }]'>
        <t-product-summary slot="tripSummary"></t-product-summary>

    </t-guest-info>
    <br /><br /><br />
    <button id="demoButton" style="color:white; background-color:black" onclick="fireIsValidMethod()">Test Button</button>

</body>
<script>
    function fireIsValidMethod() {
        var valid = document.getElementById("guestInfo").isValidGuest();
        document.getElementById("guestInfo").isData();

        var totalData = [];
        var prodLen = guestInfo.product.length;
        for (var i = 0; i < prodLen; i++) {
            var roomLen = guestInfo.product[i].rooms.length;
            for (var j = 0; j < roomLen; j++) {
                var traveler = Polymer.dom(guestInfo.root).querySelector("#travelerInfo" + (i + 1) + (j + 1));
                var adultCount = traveler.adultPaxCount;
                for (var k = 0; k < adultCount; k++) {
                    var paxInfoRoom = Polymer.dom(traveler.root).querySelector("#adultPaxInfo" + (j + 1) + (k + 1));
                    var paxInfoEmail = Polymer.dom(paxInfoRoom.root).querySelector("#adultEmail");
                    if (paxInfoEmail.invalid === true) {
                        var PaxInfoEmailLabel = Polymer.dom(paxInfoRoom.root).querySelector("#adultEmailLabel");
                        PaxInfoEmailLabel.hidden = true;
                    }
                }
            }
        }
        alert(valid);
    }
</script>


</html>