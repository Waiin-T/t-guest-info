<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../iron-icons/iron-icons.html"><link rel="import" href="../iron-media-query/iron-media-query.html"><link rel="import" href="../paper-item/paper-item.html"><link rel="import" href="../paper-input/paper-input.html"><link rel="import" href="../app-layout/app-toolbar/app-toolbar.html"><link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html"><link rel="import" href="../paper-listbox/paper-listbox.html"><link rel="import" href="../paper-icon-button/paper-icon-button.html"><link rel="import" href="../paper-button/paper-button.html"><link rel="import" href="t-traveler-info.html"><link rel="import" href="t-loyalty-program.html"><link rel="import" href="t-product-summary.html"></head><body><dom-module id="t-guest-info"><template><style>:host{display:block;background-color:white;margin-left:10px;margin-right:10px;}#travelerInfo{margin-top:40px;padding-left:0px;padding-right:0px;}#toolbar1{background-color:transparent;border:1px solid lightgray;margin:10px;color:#478BD7;height:60px;}#signInLink{color:#478BD7;text-decoration:none;font-size:16px;}#tLoyaltyDatabase{margin-top:2%;}@media (min-width: 320px) and (max-width: 380px){#travelerInfo{margin-top:40px;}#toolbarLotalty{background-color:var(--toolbar-background-color);width:100%;height:50px;margin-left:-11px;padding-right:5px;font-size:16px;margin-top:20px;}.loyaltyDiv{width:100%;margin-left:10px;margin-right:10px;}#lineBreakBetweenProduct{margin-top:50px;clear:both;margin-left:-4px;}#productSummaryDiv{border:black solid 2px;height:500px;width:100%;float:left;}.both{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-moz-box-align:start;-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start;}.both #roomTemplateDiv{-webkit-box-ordinal-group:2;-moz-box-ordinal-group:2;-ms-flex-order:2;-webkit-order:2;order:2;}.both #productSummaryDiv{-webkit-box-ordinal-group:1;-moz-box-ordinal-group:1;-ms-flex-order:1;-webkit-order:1;order:1;}}@media (min-width: 380px) and (max-width:767px){#toolbarLotalty{background-color:var(--toolbar-background-color);width:95%;height:50px;margin-left:-11px;padding-right:5px;font-size:16px;margin-top:20px;}.loyaltyDiv{width:100%;margin-top:10px;margin-left:10px;}#lineBreakBetweenProduct{margin-top:50px;clear:both;margin-left:-4px;}#productSummaryDiv{border:black solid 2px;height:500px;width:100%;float:left;}#roomTemplateDiv{float:left;width:100%;}}@media (min-width: 768px) and (max-width:1023px){#toolbarLotalty{background-color:var(--toolbar-background-color);width:97%;height:50px;margin-left:-15px;padding-right:5px;font-size:16px;margin-top:20px;}.loyaltyDiv{width:100%;margin-left:10px;}#lineBreakBetweenProduct{margin-top:50px;clear:both;margin-left:10px;}#productSummaryDiv{border:black solid 2px;height:500px;width:30%;float:left;margin-left:32px;margin-top:5px;}#roomTemplateDiv{float:left;width:65%;}}@media (min-width: 1024px){.loyaltyDiv{width:67%;}#toolbarLotalty{font-size:16px;background-color:var(--toolbar-background-color);width:97%;margin-left:10px;margin-top:20px;height:50px;}#lineBreakBetweenProduct{margin-top:50px;clear:both;margin-left:10px;}#productSummaryDiv{border:black solid 2px;height:500px;width:30%;float:left;margin-left:55px;margin-top:20px;}#roomTemplateDiv{float:left;width:65%;}.both{width:100%;display:flex;}}</style><app-toolbar id="toolbar1"><a href="#" id="signInLink">Sign in to make booking faster</a></app-toolbar><br><template is="dom-repeat" items="{{product}}" as="product" index-as="productNo" id="productTemplate"><div style="float:left" class="both"><div id="roomTemplateDiv"><template is="dom-repeat" items="{{product.rooms}}" as="room" id="travelerTemplate"><t-traveler-info id="travelerInfo{{_increaseIndex(productNo)}}{{_increaseIndex(index)}}" class="travelerInfo" product-title="{{product.title}} {{_increaseIndex(index)}}" sub-title="{{room.name}} | {{room.criteria.traveler.adult}} {{_adultLabel(room.criteria.traveler.adult)}}, {{room.criteria.traveler.child}} {{_childLabel(room.criteria.traveler.child)}}" policy-list="{{room.policies}}" r-number="{{_increaseIndex(index)}}" pax-list="{{paxlist}}" option="[[option]]" resources="{{resources}}" ad-pax-count="[[room.criteria.traveler.adult]]" ch-pax-count="[[room.criteria.traveler.child]]" only-lead-pax-info="{{room.onlyLeadPaxInfo}}" pax-list-available="{{paxListAvailable}}" product-no="{{productNo}}" total-pax-list="{{_totalPaxListObject}}" on-listcategorize="_handleDuplicateRecordForPaxList"></t-traveler-info><br></template></div><div id="productSummaryDiv"><slot name="tripSummary"></slot></div></div><div id="loyaltyDiv{{productNo}}" class="loyaltyDiv" hidden$="{{!product.allowLoyalty}}"><app-toolbar id="toolbarLotalty">{{_loyaltyProgram}}</app-toolbar><div id="tLoyaltyProgram"><t-loyalty-program id="tLoyaltyDatabase{{_increaseIndex(productNo)}}" resources="{{resources}}" pax-list-available="{{paxListAvailable}}" loyalty-programs="{{loyaltyPrograms}}" pax-list="{{paxlist}}" total-pax-list="{{_totalPaxListObject}}" index="{{_increaseIndex(productNo)}}">{{ item.loyaltyProgram }}</t-loyalty-program></div></div><hr id="lineBreakBetweenProduct"></template><br><br></template><script>var TGuestInfo=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this._setDefaultResourcesvalue(),0===this.paxlist.length&&(this.paxListAvailable=!1,this.paxList=[]),this._totalPaxListObject=[];for(var a=0;a<this.product.length;a++){this._roomPaxListObject=[];for(var c,d=this.product[a].rooms,e=0;e<d.length;e++)c={Id:d[e].id,paxListObj:[]},this.push('_roomPaxListObject',c);var f={Id:this.product[a].id,paxListObj:this._roomPaxListObject};this.push('_totalPaxListObject',f)}}},{key:'isValidGuest',value:function(){for(var a,b=[],c=this.product.length,d=0,e=0;e<c;e++)d=this.product[e].rooms.length+d;for(var f=0;f<d;f++)b[f]=this.shadowRoot.querySelectorAll('t-traveler-info')[f].isValid();for(var f=0;f<d;f++)a=!1!==b[f];return a}},{key:'getData',value:function(){for(var a=this._totalPaxListObject,b=[],c=this.product.length,d=0;d<c;d++)!0===this.product[d].allowLoyalty&&(b[d]=this._getLoyaltyProgramData(d));return a}},{key:'_handleDuplicateRecordForPaxList',value:function(a){for(var b,c=this._totalPaxListObject.length,d=0;d<c;d++){b=this._totalPaxListObject[d].paxListObj.length;for(var e,f=0;f<b;f++){e=this._totalPaxListObject[d].paxListObj[f].paxListObj.length;for(var g,h=0;h<e;h++)g=this._totalPaxListObject[d].paxListObj[f].paxListObj[h],void 0===g&&(g=this._totalPaxListObject[d].paxListObj[f].paxListObj[h]),null==g.firstName||''==g.firstName||this._isDuplicatePax(a.detail.listcategorized,g.firstName,g.lastName)||a.detail.listcategorized.push(g)}}}},{key:'_isDuplicatePax',value:function(a,b,c){if(0==a.length)return!1;for(var d=0;d<a.length;d++)if(a[d].firstName===b&&a[d].lastName===c)return!0;return!1}},{key:'_adultLabel',value:function(a){return 1===a?this._adultTitle:this._adultPluralTitle}},{key:'_childLabel',value:function(a){return 1===a?this._childTitle:this._childPluralTitle}},{key:'_increaseIndex',value:function(a){return a+1}},{key:'_getLoyaltyProgramData',value:function(){for(var a,b=[],c=this.loyaltyPrograms.length,d=0;d<c;d++)a={},a.GuestName=this.loyaltyPrograms[d].guestName,a.ProgramName=this.loyaltyPrograms[d].programName,a.ProgramNumber=this.loyaltyPrograms[d].programNumber,b[d]=a;return b}},{key:'_setDefaultResourcesvalue',value:function(){this._adultTitle=this.resources.labels.adult.title?this.resources.labels.adult.title:'Adult',this._adultPluralTitle=this.resources.labels.adult.titlep?this.resources.labels.adult.titlep:'Adults',this._childTitle=this.resources.labels.child.title?this.resources.labels.child.title:'Child',this._childPluralTitle=this.resources.labels.child.titlep?this.resources.labels.child.titlep:'Children',this._loyaltyProgram=this.resources.loyaltyProgram.loyaltyProgram?this.resources.loyaltyProgram.loyaltyProgram:'Loyalty program'}}],[{key:'is',get:function(){return't-guest-info'}},{key:'properties',get:function(){return{loyaltyPrograms:{type:Array,notify:!0,value:[]},onlyLeadPaxInfo:{type:Boolean,value:!0},product:{type:Object,value:{}},paxListAvailable:{type:Boolean,value:!0},productTitle:{type:String,value:'Room'},subTitle:{type:String},adultPaxCount:{type:Number},childPaxCount:{type:Number},paxlist:{type:Array,value:[],notify:!0},policyList:{type:Array},option:{type:Object,value:{requiredField:[],requiredFieldForLeadPax:[]}},resources:{type:Object},_totalPaxListObject:{type:Array},_roomPaxListObject:{type:Array},_adultTitle:String,_adultPluralTitle:String,_childTitle:String,_childPluralTitle:String,_loyaltyProgram:String}}}]),b}(Polymer.GestureEventListeners(Polymer.Element));window.customElements.define(TGuestInfo.is,TGuestInfo);</script></dom-module></body></html>